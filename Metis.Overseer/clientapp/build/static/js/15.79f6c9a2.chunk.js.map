{"version":3,"sources":["services/api.js","components/containers/LogBookEditContainer.js","components/logBookEdit/LogBookEditHeader.js","components/logBookEdit/LogBookEdit.js"],"names":["baseUrl","process","getHeaders","headers","Headers","append","token","storage","get","concat","getJson","_callee6","req","D_github_metis_Metis_Web_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","a","wrap","_context6","prev","next","json","abrupt","sent","t0","stop","request","_callee7","_ref","method","url","data","res","_context7","fetch","body","JSON","stringify","ok","Error","Message","statusText","status","antd_es_notification__WEBPACK_IMPORTED_MODULE_1__","placement","message","description","api","_get","Object","D_github_metis_Metis_Web_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","mark","_callee","_context","_x3","apply","this","arguments","post","_post","_callee2","_context2","_x4","_x5","put","_put","_callee3","_context3","_x6","_x7","patch","_patch","_callee4","_context4","_x8","_x9","delete","_delete2","_callee5","_context5","_x10","withRouter","props","id","match","params","children","history","_useState","useState","_useState2","slicedToArray","logBook","setLogBook","onBack","push","onSave","_onSave","asyncToGenerator","regenerator_default","saved","onCancel","useEffect","_fetchLogBook","response","fetchLogBook","React","Children","map","child","cloneElement","STRINGS","LogBookEditHeader","react_default","createElement","page_header","title","name","subTitle","className","extra","es_button","key","type","size","onClick","LogBookEditView","style","height","display","flexDirection","logBookEdit_LogBookEditHeader","LogBookEdit","containers_LogBookEditContainer","LogBookEdit_LogBookEditView"],"mappings":"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","file":"static/js/15.79f6c9a2.chunk.js","sourcesContent":["import { notification as antdNotification } from 'antd'\r\nimport storage from './storage'\r\n\r\nconst baseUrl = process.env.REACT_APP_API_URL\r\n\r\nfunction getHeaders() {\r\n  const headers = new Headers()\r\n  headers.append('Content-Type', 'application/json')\r\n  const token = storage.get('token')\r\n  if (token) {\r\n    headers.append('Authorization', `Bearer ${token}`)\r\n  }\r\n  return headers\r\n}\r\n\r\nasync function getJson(req) {\r\n  try {\r\n    return await req.json()\r\n  } catch (err) {\r\n    return null\r\n  }\r\n}\r\n\r\nasync function request({ method, url, data }) {\r\n  try {\r\n    const req = await fetch(baseUrl + url, {\r\n      method: method,\r\n      headers: getHeaders(),\r\n      body: data && JSON.stringify(data)\r\n    })\r\n\r\n    const res = await getJson(req)\r\n    if (!req.ok) {\r\n      throw new Error(\r\n        (res && res.Message) || `${req.statusText} (${req.status})`\r\n      )\r\n    }\r\n    return res\r\n  } catch (err) {\r\n    antdNotification['error']({\r\n      placement: 'bottomRight',\r\n      message: 'Σφάλμα',\r\n      description: err.message\r\n    })\r\n    return null\r\n  }\r\n}\r\n\r\nconst api = {\r\n  get: async url => await request({ method: 'GET', url }),\r\n  post: async (url, data) => await request({ method: 'POST', url, data }),\r\n  put: async (url, data) => await request({ method: 'PUT', url, data }),\r\n  patch: async (url, data) => await request({ method: 'PATCH', url, data }),\r\n  delete: async url => await request({ method: 'DELETE', url })\r\n}\r\n\r\nexport default api\r\n","import React, { useState, useEffect } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport api from '../../services/api'\r\n\r\nconst LogBookEditContainer = props => {\r\n  const { id } = props.match.params\r\n  const { children, history } = props\r\n  const [logBook, setLogBook] = useState(null)\r\n\r\n  function onBack() {\r\n    history.push('/logbooks')\r\n  }\r\n\r\n  async function onSave() {\r\n    const saved = await api.put(`/api/logbooks/${id}`, logBook)\r\n    setLogBook(saved)\r\n  }\r\n\r\n  function onCancel() {\r\n    history.push(`/logbooks/${id}`)\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function fetchLogBook() {\r\n      const response = await api.get(`/api/logbooks/${id}`)\r\n      setLogBook(response)\r\n    }\r\n    fetchLogBook()\r\n  }, [id])\r\n\r\n  return React.Children.map(children, child =>\r\n    React.cloneElement(child, {\r\n      logBook,\r\n      onBack,\r\n      onSave,\r\n      onCancel\r\n    })\r\n  )\r\n}\r\n\r\nexport default withRouter(LogBookEditContainer)\r\n","import React from 'react'\r\nimport { PageHeader as AntdPageHeader, Button as AntdButton } from 'antd'\r\nimport './logBookEdit.less'\r\n\r\nconst STRINGS = {\r\n  SUBTITLE: 'Επεξεργασία Βιβλίου Συμβάντων',\r\n  SAVE: 'Αποθήκευση',\r\n  CANCEL: 'Ακύρωση'\r\n}\r\n\r\nconst LogBookEditHeader = ({ logBook, onBack, onSave, onCancel }) => {\r\n  return (\r\n    <AntdPageHeader\r\n      title={logBook.name}\r\n      subTitle={STRINGS.SUBTITLE}\r\n      onBack={() => onBack()}\r\n      className=\"logbook-header\"\r\n      extra={[\r\n        [\r\n          <AntdButton key=\"2\" type=\"danger\" size=\"small\" onClick={onCancel}>\r\n            {STRINGS.CANCEL}\r\n          </AntdButton>,\r\n          <AntdButton key=\"1\" type=\"primary\" size=\"small\" onClick={onSave}>\r\n            {STRINGS.SAVE}\r\n          </AntdButton>\r\n        ]\r\n      ]}\r\n    />\r\n  )\r\n}\r\n\r\nexport default LogBookEditHeader\r\n","import React from 'react'\r\nimport LogBookEditContainer from '../containers/LogBookEditContainer'\r\nimport LogBookEditHeader from './LogBookEditHeader'\r\n\r\nconst LogBookEditView = ({ logBook, onBack, onSave, onCancel }) => {\r\n  if (!logBook) {\r\n    return null\r\n  }\r\n  return (\r\n    <div style={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n      <LogBookEditHeader\r\n        logBook={logBook}\r\n        onBack={onBack}\r\n        onSave={onSave}\r\n        onCancel={onCancel}\r\n      />\r\n      <div style={{ display: 'flex', height: '100%' }}>\r\n        <div>form</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst LogBookEdit = () => (\r\n  <LogBookEditContainer>\r\n    <LogBookEditView />\r\n  </LogBookEditContainer>\r\n)\r\n\r\nexport default LogBookEdit\r\n"],"sourceRoot":""}