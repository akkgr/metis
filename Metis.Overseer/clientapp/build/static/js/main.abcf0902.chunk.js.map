{"version":3,"sources":["components/map/Map.module.sass","assets/dot.png","assets/logo.png","services/storage.js","auth/AuthProvider.js","components/layout/Navbar.js","components/layout/Sidebar.js","components/layout/Layout.js","services/api.js","components/login/Login.js","components/dashboard/Dashboard.js","services/hubConnectionBuilder.js","components/map/Map.js","components/map/mapBuilder.js","components/map/MapAlarms.js","components/map/MapSiteList.js","components/map/MapSiteDetails.js","components/map/MapContainer.js","services/CommonFunctions.js","components/books/Books.js","components/books/Book.js","components/books/LogEntry.js","components/books/BookEntries.js","components/books/BookChat.js","components/books/BookMembers.js","components/books/BookContainer.js","components/Routes.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","StatusContainer","SiteRow","DropdownInput","Dropdown","SiteView","SiteViewHeader","SiteViewParagraph","AlarmsContainer","AlarmsContent","__webpack_require__","p","storage","prefix","process","REACT_APP_STORAGE_PREFIX","get","key","value","localStorage","getItem","JSON","parse","set","setItem","stringify","remove","removeItem","AuthContext","React","createContext","isAuthenticated","signIn","signOut","AuthProvider","props","token","session","getSession","jwt","decode","_useState","useState","username","exp","Date","valueOf","isExpired","_useState2","Object","slicedToArray","setIsAuthenticated","react_default","a","createElement","Provider","children","Navbar","_ref","openSidebar","menu","mode","className","selectable","Item","onClick","icon","type","Sidebar","collapsed","toggleCollapsed","auth","useContext","isMobile","window","innerWidth","width","minimize","layout","Sider","collapsedWidth","src","logo","alt","title","react_router_dom","to","Content","Layout","setCollapsed","navbar","layout_Navbar","sidebar","layout_Sidebar","Fragment","baseUrl","getHeaders","headers","Headers","append","concat","getJson","_callee6","req","regenerator_default","wrap","_context6","prev","next","json","abrupt","sent","t0","stop","request","_callee7","method","url","data","res","_context7","fetch","body","ok","Error","Message","statusText","status","notification","placement","message","description","api","_get","asyncToGenerator","mark","_callee","_context","_x3","apply","this","arguments","post","_post","_callee2","_context2","_x4","_x5","put","_put","_callee3","_context3","_x6","_x7","patch","_patch","_callee4","_context4","_x8","_x9","delete","_delete2","_callee5","_context5","_x10","Login","authContext","password","loginModel","setLoginModel","inputsHandler","e","objectSpread","defineProperty","target","name","loginHandler","clearButton","es_row","justify","align","col","xs","span","md","xl","xxl","comment","author","typography","Title","level","avatar","size","content","divider","es_form","input","placeholder","autoComplete","suffix","onChange","Password","onPressEnter","es_button","block","Dashboard","counterCards","label","color","map","c","i","sm","lg","card","statistic","theme","twoToneColor","SERVER_TIMEOUT","RECONNECT_DELAY","connection","start","_start","console","log","setTimeout","HubConnectionBuilder","withUrl","accessTokenFactory","configureLogging","LogLevel","Debug","build","serverTimeoutInMilliseconds","onclose","hubConnectionBuilder","statusColor","Alarm","Ok","NotFound","Maintenance","Selected","Map","sites","onSelect","setMap","_useState3","_useState4","layer","setLayer","useEffect","_map","OLMap","controls","view","OLView","center","OLfromLonLat","zoom","darklayer","_layer","OLVectorLayer","source","OLVectorSource","features","addLayer","setZIndex","_select","Select","layers","addInteraction","on","evt","marker","getFeatures","getArray","getId","markers","filter","x","latitude","site","OLFeature","geometry","OLPoint","longitude","setId","id","setStyle","OLStyle","image","OLIcon","dot","siteToMarker","setSource","getSource","refresh","force","updateSize","style","height","MapAlarm","alarm","isExpanded","fontSize","fontWeight","currentStatus","toLocaleTimeString","previousStatus","MapAlarms","_ref2","alarms","containerRef","useRef","setIsExpanded","classes","ref","display","justifyContent","current","idx","MapAlarms_MapAlarm","handleChange","options","o","es_select","Option","MapSiteList","dropdownClassName","allowClear","handleSelect","StartOrStopMaintenanceButton","onMaintenanceStart","onMaintenanceStop","marginRight","MapSiteDetails","onClose","Paragraph","marginTop","Text","pages","s","href","uri","MapSiteDetails_StartOrStopMaintenanceButton","HUB_URL","MapContainer","hub","setSites","messages","setMessages","_useState5","_useState6","selected","setSelected","_useState7","_useState8","selectedSite","setSelectedSite","getSites","then","_onMaintenanceStart","_onMaintenanceStop","con","info","toConsumableArray","slice","catch","err","error","find","map_Map","flexDirection","map_MapSiteList","flexGrow","map_MapSiteDetails","map_MapAlarms","calculateStatus","date","_d","d","getTime","tag","getCurrentMember","user","userId","userid","email","priority","0","1","2","3","formItemLayout","Books","setData","loading","setLoading","columns","dataIndex","sorter","render","row","item","moment","format","close","page_header","subTitle","onBack","history","back","extra","push","assign","padding","list","dataSource","renderItem","Meta","table","rowKey","record","pagination","filters","field","sorted","order","reverse","last","defaultPageSize","hideOnSinglePage","locale","itemUnit","itemsUnit","searchPlaceholder","member","Book","match","params","usersToSelect","setUsersToSelect","usersSelected","setUsersSelected","book","setBook","m","members","deleteButton","popconfirm","onConfirm","onCancel","okText","cancelText","bookMonitorLink","createBody","owner","f","some","onSubmit","preventDefault","htmlType","event","date_picker","transfer","titles","showSearch","listStyle","targetKeys","nextTargetKeys","labelCol","wrapperCol","currentUser","LogEntry","recipients","setRecipients","initData","issuer","setLog","isCompleted","canEdit","recipient","handleFields","rec","completionTimeButton","completionTime","disabled","logBookId","modal","visible","onOk","cancelButtonProps","defaultValue","optionFilterProp","filterOption","option","toLowerCase","indexOf","TextArea","actions","autosize","minRows","maxRows","dtg","ect","BookEntries","canDeleteOrEdit","tooltip","edit","onDelete","BookChat","chatmessages","messageRef","scrollIntoView","behavior","empty","hasChat","length","chat","isCurrent","timeline","flexShrink","fromNow","Search","enterButton","onSearch","state","BookMembers","itemLayout","TabPane","tabs","BookContainer","entries","logEntry","setLogEntry","tabIndex","setTabIndex","handleLogEntry","entry","undefined","index","findIndex","logEntryModal","books_LogEntry","submited","lastupdate","lastUpdate","tags","footer","defaultActiveKey","tab","books_BookEntries","l","splice","deleteEntryHandler","books_BookMembers","books_BookChat","Authorizedroutes","react_router","path","exact","component","UnauthorizedRoutes","Routes","Routes_Authorizedroutes","Routes_UnauthorizedRoutes","withRouter","components_layout_Layout","react","fallback","App_Routes","Boolean","location","hostname","Root","auth_AuthProvider","src_App","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.abcf0902.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"StatusContainer\":\"Map_StatusContainer__355qF\",\"SiteRow\":\"Map_SiteRow__330zv\",\"DropdownInput\":\"Map_DropdownInput__1gZu_\",\"Dropdown\":\"Map_Dropdown__3M2D9\",\"SiteView\":\"Map_SiteView__3K6ou\",\"SiteViewHeader\":\"Map_SiteViewHeader__100Dm\",\"SiteViewParagraph\":\"Map_SiteViewParagraph__2QLKL\",\"AlarmsContainer\":\"Map_AlarmsContainer__2Klq2\",\"AlarmsContent\":\"Map_AlarmsContent__QdsXi\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAB5ElEQVQ4T6WTQYhSURSGPyUZ5E3PjQUJUoqguKmF8BYuw3A7EYgEhi0kgnygxNguNAVdiSCChLSIZiFuLFwELdwIgUh7U4twERmk9rJhGo27ePJmCgbqLi/3+885//mviT+PBdgBLgAysAS+AD+BI+Nz0ynWCdwArkuS5LZarTur1epQ07SPwGvgDfBBZ4zwZeChLMs3FUWxBwIBiyzLLJdLBoPBUa/Xmy0Wi5dAERgLAR0WFfedTuedSCSyG4/H8fv926aGwyH1ep1Wq6VNJpMDIAt8ErCYMSbLci6RSFxSVRWHw4HZbN7Cm82G6XRKrVajWq1+nc/n+8BzAe8C9VAodKtcLlt8Pt8JUFdYr9eIDlKp1K9Op9MEHgjYJUnSQTKZVAqFwl/MP3mVzWYplUpvNU2LC/iq3W5/lk6nr2UymTPhcrlMPp9/N5vN7gnYLUnSC1VVlXw+fyacy+UoFoui8l0BnweehsPhvUqlYvF4PJhMp9cPwrTxeCxmPm632y3g/n+7LVq9AjxyuVy3o9GoFIvF8Hq92xFGoxGNRoNms/ljOBwKpx+LpBn7cwsBm822FwwGbYqinNMT1u/3j7vd7rf5fP4KeAK8NyZMr/LP2dYFxI8Swblo+FWfge/AoXEdvwFPY8POUzxX0wAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/logo.767649f2.png\";","const storage = {\r\n  prefix: process.env.REACT_APP_STORAGE_PREFIX || '',\r\n  get: key => {\r\n    const value = localStorage.getItem(storage.prefix + key)\r\n    return JSON.parse(value)\r\n  },\r\n  set: (key, value) => {\r\n    return localStorage.setItem(storage.prefix + key, JSON.stringify(value))\r\n  },\r\n  remove: key => {\r\n    localStorage.removeItem(storage.prefix + key)\r\n  }\r\n}\r\n\r\nexport default storage\r\n","import React, { useState } from 'react'\r\nimport jwt from 'jsonwebtoken'\r\nimport storage from '../services/storage'\r\n\r\nconst tokenSuffix = 'token'\r\nconst sessionSuffix = 'auth'\r\n// The initial values here are only for autocompletion in other components\r\nexport const AuthContext = React.createContext({\r\n  isAuthenticated: true,\r\n  signIn: () => {},\r\n  signOut: () => {}\r\n})\r\n\r\nconst AuthProvider = props => {\r\n  const token = storage.get(tokenSuffix)\r\n  let session = storage.get(sessionSuffix)\r\n  const getSession = () => {\r\n    if (!session && token) {\r\n      session = jwt.decode(token)\r\n      storage.set(sessionSuffix, session)\r\n    }\r\n    return session\r\n  }\r\n  const isExpired = () => {\r\n    const session = getSession()\r\n    const expired = session && session.exp * 1000 < new Date().valueOf()\r\n    return expired\r\n  }\r\n  const initAuthentication = () => {\r\n    session = getSession()\r\n    const check = session && session.username && !isExpired()\r\n    return check\r\n  }\r\n  const signIn = token => {\r\n    const session = jwt.decode(token)\r\n    storage.set(tokenSuffix, token)\r\n    storage.set(sessionSuffix, session)\r\n    setIsAuthenticated(true)\r\n  }\r\n  const signOut = () => {\r\n    storage.remove(tokenSuffix)\r\n    storage.remove(sessionSuffix)\r\n    setIsAuthenticated(false)\r\n  }\r\n  const [isAuthenticated, setIsAuthenticated] = useState(initAuthentication())\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ isAuthenticated, signIn, signOut }}>\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n\r\nexport default AuthProvider\r\n","import React from 'react'\r\nimport { Menu as AntdMenu, Icon as AntdIcon } from 'antd'\r\nimport './Layout.sass'\r\nimport '../../styles/Utilities.sass'\r\n\r\nconst Navbar = ({ openSidebar }) => (\r\n  <AntdMenu\r\n    mode=\"horizontal\"\r\n    className=\"has-background-dark mobile-menu\"\r\n    selectable={false}>\r\n    <AntdMenu.Item key=\"99\" className=\"menu-item \" onClick={openSidebar}>\r\n      <AntdIcon type=\"menu\" />\r\n    </AntdMenu.Item>\r\n  </AntdMenu>\r\n)\r\n\r\nexport default Navbar\r\n","import React, { useContext } from 'react'\r\nimport { Layout as AntdLayout, Menu as AntdMenu, Icon as AntdIcon } from 'antd'\r\nimport { NavLink } from 'react-router-dom'\r\nimport logo from '../../assets/logo.png'\r\nimport storage from '../../services/storage'\r\nimport { AuthContext } from '../../auth/AuthProvider'\r\nimport './Layout.sass'\r\n\r\nconst breakpoints = {\r\n  xs: '480px',\r\n  sm: '576px',\r\n  md: '768px',\r\n  lg: '992px',\r\n  xl: '1200px',\r\n  xxl: '1600px'\r\n}\r\n\r\nconst Sidebar = ({ collapsed, toggleCollapsed }) => {\r\n  const auth = useContext(AuthContext)\r\n  const isMobile = window.innerWidth <= 760\r\n  const width = isMobile ? 0 : 80\r\n  const username = storage.get('auth')\r\n  const minimize = isMobile ? (\r\n    <AntdMenu.Item key=\"1\" onClick={toggleCollapsed}>\r\n      <span>\r\n        <AntdIcon type={collapsed ? 'menu-unfold' : 'menu-fold'} />\r\n        <span>Ελαχιστοποίηση</span>\r\n      </span>\r\n    </AntdMenu.Item>\r\n  ) : null\r\n  return (\r\n    <AntdLayout.Sider collapsed={collapsed} collapsedWidth={width}>\r\n      <AntdMenu\r\n        selectable={false}\r\n        mode=\"vertical\"\r\n        className=\"is-fullheight sidebar\">\r\n        <div className=\"logo-item\" key=\"0\">\r\n          <img className=\"logo\" src={logo} alt=\"...\" />\r\n          <span className=\"ml-1\">Metis</span>\r\n        </div>\r\n        <AntdMenu.Item key=\"name\" className=\"mb-5\">\r\n          <span className=\"user-profile\">\r\n            <AntdIcon type=\"user\" />\r\n            <span>{username.title}</span>\r\n          </span>\r\n        </AntdMenu.Item>\r\n        {minimize}\r\n        <AntdMenu.Item key=\"2\" onClick={isMobile ? toggleCollapsed : null}>\r\n          <NavLink to=\"/dashboard\">\r\n            <AntdIcon type=\"home\" />\r\n            <span>Αρχική</span>\r\n          </NavLink>\r\n        </AntdMenu.Item>\r\n        <AntdMenu.Item key=\"3\" onClick={isMobile ? toggleCollapsed : null}>\r\n          <NavLink to=\"/map\">\r\n            <AntdIcon type=\"global\" />\r\n            <span>Χάρτης</span>\r\n          </NavLink>\r\n        </AntdMenu.Item>\r\n\r\n        <AntdMenu.Item key=\"4\" onClick={isMobile ? toggleCollapsed : null}>\r\n          <NavLink to=\"/books\">\r\n            <AntdIcon type=\"notification\" />\r\n            <span>Συμβάντα</span>\r\n          </NavLink>\r\n        </AntdMenu.Item>\r\n        <AntdMenu.Item\r\n          className=\"bottom-menu-item\"\r\n          key=\"99\"\r\n          onClick={auth.signOut}>\r\n          <span>\r\n            <AntdIcon type=\"logout\" />\r\n            <span>Αποσύνδεση</span>\r\n          </span>\r\n        </AntdMenu.Item>\r\n      </AntdMenu>\r\n    </AntdLayout.Sider>\r\n  )\r\n}\r\n\r\nexport default Sidebar\r\n","import React, { useContext, useState } from 'react'\r\nimport { AuthContext } from '../../auth/AuthProvider'\r\nimport Navbar from './Navbar'\r\nimport { Layout as AntdLayout } from 'antd'\r\nimport Sidebar from './Sidebar'\r\nimport '../../styles/Utilities.sass'\r\n\r\nconst { Content } = AntdLayout\r\n\r\nconst Layout = props => {\r\n  const [collapsed, setCollapsed] = useState(true)\r\n  const toggleCollapsed = () => setCollapsed(!collapsed)\r\n\r\n  const auth = useContext(AuthContext)\r\n  const navbar = auth.isAuthenticated ? (\r\n    <Navbar openSidebar={toggleCollapsed} />\r\n  ) : null\r\n  const sidebar = auth.isAuthenticated ? (\r\n    <Sidebar collapsed={collapsed} toggleCollapsed={toggleCollapsed} />\r\n  ) : null\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <AntdLayout className=\"is-fullheight\">\r\n        {sidebar}\r\n        <AntdLayout>\r\n          {navbar}\r\n          <Content className=\"calc-h\">{props.children}</Content>\r\n        </AntdLayout>\r\n      </AntdLayout>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Layout\r\n","import { notification as antdNotification } from 'antd'\r\nimport storage from './storage'\r\n\r\nconst baseUrl = process.env.REACT_APP_API_URL\r\n\r\nfunction getHeaders() {\r\n  const headers = new Headers()\r\n  headers.append('Content-Type', 'application/json')\r\n  const token = storage.get('token')\r\n  if (token) {\r\n    headers.append('Authorization', `Bearer ${token}`)\r\n  }\r\n  return headers\r\n}\r\n\r\nasync function getJson(req) {\r\n  try {\r\n    return await req.json()\r\n  } catch (err) {\r\n    return null\r\n  }\r\n}\r\n\r\nasync function request({ method, url, data }) {\r\n  try {\r\n    const req = await fetch(baseUrl + url, {\r\n      method: method,\r\n      headers: getHeaders(),\r\n      body: data && JSON.stringify(data)\r\n    })\r\n\r\n    const res = await getJson(req)\r\n    if (!req.ok) {\r\n      throw new Error(\r\n        (res && res.Message) || `${req.statusText} (${req.status})`\r\n      )\r\n    }\r\n    return res\r\n  } catch (err) {\r\n    antdNotification['error']({\r\n      placement: 'bottomRight',\r\n      message: 'Σφάλμα',\r\n      description: err.message\r\n    })\r\n    return null\r\n  }\r\n}\r\n\r\nconst api = {\r\n  get: async url => await request({ method: 'GET', url }),\r\n  post: async (url, data) => await request({ method: 'POST', url, data }),\r\n  put: async (url, data) => await request({ method: 'PUT', url, data }),\r\n  patch: async (url, data) => await request({ method: 'PATCH', url, data }),\r\n  delete: async url => await request({ method: 'DELETE', url })\r\n}\r\n\r\nexport default api\r\n","import React, { useState, useContext } from 'react'\r\nimport { AuthContext } from '../../auth/AuthProvider'\r\nimport {\r\n  Form as AntdForm,\r\n  Icon as AntdIcon,\r\n  Input as AntdInput,\r\n  Button as AntdButton,\r\n  Row as AntdRow,\r\n  Col as AntdCol,\r\n  Typography as AntdTypography,\r\n  Divider as AntdDivider,\r\n  Comment as AntdComment,\r\n  Avatar as AntdAvatar\r\n} from 'antd'\r\nimport api from '../../services/api'\r\nimport logo from '../../assets/logo.png'\r\nimport '../../styles/Utilities.sass'\r\nimport './Login.sass'\r\n\r\nconst Login = () => {\r\n  const authContext = useContext(AuthContext)\r\n  const [loginModel, setLoginModel] = useState({\r\n    username: '',\r\n    password: ''\r\n  })\r\n\r\n  const inputsHandler = e => {\r\n    setLoginModel({\r\n      ...loginModel,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  const clearUsernameHandler = () => {\r\n    setLoginModel({ ...loginModel, username: '' })\r\n  }\r\n\r\n  const loginHandler = async () => {\r\n    const res = await api.post('/api/token', loginModel)\r\n\r\n    if (res && res.token) {\r\n      authContext.signIn(res.token)\r\n    }\r\n  }\r\n\r\n  const clearButton = loginModel.username && (\r\n    <AntdIcon type=\"close-circle\" onClick={clearUsernameHandler} />\r\n  )\r\n\r\n  return (\r\n    <AntdRow\r\n      className=\"is-fullheight\"\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n      align=\"middle\">\r\n      <AntdCol\r\n        xs={{ span: 0 }}\r\n        md={{ span: 11 }}\r\n        xl={{ span: 7 }}\r\n        xxl={{ span: 5 }}>\r\n        <AntdComment\r\n          author={\r\n            <AntdTypography.Title className=\"metis-title\" level={4}>\r\n              Metis\r\n            </AntdTypography.Title>\r\n          }\r\n          avatar={<AntdAvatar size={124} src={logo} alt=\"TODO\" />}\r\n          content={\r\n            <p className=\"content-fix\">\r\n              Some text that they will propably provide for use about the\r\n              application. Otherwise some basic info about what this application\r\n              does.\r\n            </p>\r\n          }\r\n        />\r\n      </AntdCol>\r\n      <AntdCol xs={{ span: 0 }} md={{ span: 1 }} className=\"has-text-centered\">\r\n        <AntdDivider type=\"vertical\" className=\"divider\" />\r\n      </AntdCol>\r\n\r\n      <AntdCol\r\n        xs={{ span: 21 }}\r\n        md={{ span: 11 }}\r\n        xl={{ span: 7 }}\r\n        xxl={{ span: 5 }}>\r\n        <AntdForm>\r\n          <AntdTypography.Title className=\"mb-5\" level={2}>\r\n            Σύνδεση\r\n          </AntdTypography.Title>\r\n          <AntdForm.Item>\r\n            <AntdInput\r\n              placeholder=\"Συμπληρώστε όνομα χρήστη\"\r\n              size=\"large\"\r\n              name=\"username\"\r\n              autoComplete=\"username\"\r\n              prefix={<AntdIcon type=\"user\" />}\r\n              suffix={clearButton}\r\n              className=\"has-text-dark\"\r\n              value={loginModel.username}\r\n              onChange={inputsHandler}\r\n            />\r\n          </AntdForm.Item>\r\n          <AntdForm.Item>\r\n            <AntdInput.Password\r\n              autoComplete=\"password\"\r\n              size=\"large\"\r\n              className=\"has-text-dark\"\r\n              name=\"password\"\r\n              prefix={<AntdIcon type=\"lock\" />}\r\n              value={loginModel.password}\r\n              onChange={inputsHandler}\r\n              placeholder=\"Ο κωδικός σας\"\r\n              onPressEnter={loginHandler}\r\n            />\r\n          </AntdForm.Item>\r\n          <AntdForm.Item>\r\n            <AntdButton\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              onClick={loginHandler}\r\n              block>\r\n              {' '}\r\n              Σύνδεση\r\n            </AntdButton>\r\n          </AntdForm.Item>\r\n        </AntdForm>\r\n      </AntdCol>\r\n    </AntdRow>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import React, { } from 'react';\r\nimport { Statistic, Row, Col, Icon, Card } from 'antd';\r\n\r\n\r\nconst Dashboard = () => {\r\n  const counters = [\r\n    { value: 254, label: 'Guarded Sites', icon: 'safety-certificate', color: 'green' },\r\n    { value: 2, label: 'Alarm Sites', icon: 'warning', color: 'red' },\r\n    { value: 4, label: 'Paused Sites', icon: 'bell', color: 'yellow' },\r\n    { value: 44, label: 'Unattended Sites', icon: 'question-circle', color: '' }\r\n  ];\r\n  const counterCards = counters.map((c, i) => <Col sm={12} xs={24} md={12} lg={6} xl={6} xxl={6} key={i} className=\"p-3\">\r\n    <Card>\r\n      <Statistic  title={c.label} value={c.value}\r\n        prefix={<Icon type={c.icon} theme=\"twoTone\" twoToneColor={c.color} />} />\r\n    </Card>\r\n  </Col>\r\n  )\r\n  return <Row >\r\n    {counterCards}\r\n  </Row>;\r\n};\r\n\r\nexport default Dashboard;","import { HubConnectionBuilder, LogLevel } from '@aspnet/signalr'\r\nimport storage from './storage'\r\n\r\n// connection timeout if no messages received (120.000ms = 120s = 2m)\r\nconst SERVER_TIMEOUT = 2 * 60 * 1000\r\nconst RECONNECT_DELAY = 6 * 1000\r\n\r\nasync function hubConnectionBuilder(url) {\r\n  const connection = new HubConnectionBuilder()\r\n    .withUrl(url, { accessTokenFactory: () => storage.get('token') })\r\n    .configureLogging(LogLevel.Debug)\r\n    .build()\r\n\r\n  connection.serverTimeoutInMilliseconds = SERVER_TIMEOUT\r\n\r\n  async function start() {\r\n    if (!storage.get('token')) {\r\n      return\r\n    }\r\n    try {\r\n      await connection.start()\r\n    } catch (err) {\r\n      console.log(err)\r\n      setTimeout(() => start(), RECONNECT_DELAY)\r\n    }\r\n  }\r\n\r\n  connection.onclose(async () => {\r\n    //await start()\r\n  })\r\n\r\n  await start()\r\n\r\n  return connection\r\n}\r\n\r\nexport default hubConnectionBuilder\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Map as OLMap, View as OLView, Feature as OLFeature } from 'ol'\r\nimport { Vector as OLVectorSource } from 'ol/source'\r\nimport { Vector as OLVectorLayer } from 'ol/layer'\r\nimport { fromLonLat as OLfromLonLat } from 'ol/proj'\r\nimport { Style as OLStyle, Icon as OLIcon } from 'ol/style'\r\nimport { Point as OLPoint } from 'ol/geom'\r\nimport Select from 'ol/interaction/Select'\r\nimport { apply } from 'ol-mapbox-style'\r\nimport darklayer from './darklayer.json'\r\nimport dot from '../../assets/dot.png'\r\n\r\nconst statusColor = {\r\n  Alarm: '#f5222d',\r\n  Ok: '#52c41a',\r\n  NotFound: '#1890ff',\r\n  Maintenance: '#faad14',\r\n  Selected: 'cyan'\r\n}\r\n\r\nfunction siteToMarker(site) {\r\n  const marker = new OLFeature({\r\n    geometry: new OLPoint(OLfromLonLat([site.longitude, site.latitude])),\r\n    label: site.name\r\n  })\r\n  marker.setId(site.id)\r\n  marker.set('status', site.status)\r\n  marker.setStyle(\r\n    new OLStyle({\r\n      image: new OLIcon({\r\n        color: statusColor[site.status],\r\n        src: dot\r\n      })\r\n    })\r\n  )\r\n  return marker\r\n}\r\n\r\nconst Map = ({ sites, onSelect }) => {\r\n  const [map, setMap] = useState(null)\r\n  const [layer, setLayer] = useState(null)\r\n\r\n  useEffect(() => {\r\n    if (map) {\r\n      return\r\n    }\r\n    setTimeout(() => {\r\n      const _map = new OLMap({\r\n        target: 'map',\r\n        controls: [],\r\n        view: new OLView({\r\n          center: OLfromLonLat([27.0, 38.0]),\r\n          zoom: 7\r\n        })\r\n      })\r\n\r\n      apply(_map, darklayer)\r\n\r\n      const _layer = new OLVectorLayer({\r\n        source: new OLVectorSource({ features: [] })\r\n      })\r\n      _map.addLayer(_layer)\r\n      _layer.setZIndex(10)\r\n\r\n      if (onSelect) {\r\n        const _select = new Select({ layers: [_layer] })\r\n        _map.addInteraction(_select)\r\n\r\n        _select.on('select', evt => {\r\n          const marker = _select.getFeatures().getArray()[0]\r\n          const key = marker && marker.getId()\r\n          onSelect(key)\r\n        })\r\n      }\r\n\r\n      setMap(_map)\r\n      setLayer(_layer)\r\n    }, 100)\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [map])\r\n\r\n  useEffect(() => {\r\n    if (!layer || !sites) {\r\n      return\r\n    }\r\n    const markers = sites\r\n      .filter(x => x.latitude > 0)\r\n      .map(site => siteToMarker(site))\r\n    layer.setSource(null)\r\n    layer.setSource(new OLVectorSource({ features: markers }))\r\n    layer.getSource().refresh({ force: true })\r\n    map.updateSize()\r\n    console.log('should have refreshed')\r\n  }, [layer, sites, map])\r\n\r\n  return <div id=\"map\" style={{ height: '100%' }} />\r\n}\r\n\r\nexport default Map\r\n","import { Map as OLMap, View as OLView, Feature as OLFeature } from 'ol'\r\nimport { Vector as OLVectorSource } from 'ol/source'\r\nimport { Vector as OLVectorLayer } from 'ol/layer'\r\nimport { fromLonLat as OLfromLonLat } from 'ol/proj'\r\nimport { Style as OLStyle, Icon as OLIcon } from 'ol/style'\r\nimport { Point as OLPoint } from 'ol/geom'\r\nimport Select from 'ol/interaction/Select'\r\nimport { apply } from 'ol-mapbox-style'\r\nimport darklayer from './darklayer.json'\r\nimport dot from '../../assets/dot.png'\r\n\r\nexport const statusColor = {\r\n  Alarm: '#f5222d',\r\n  Ok: '#52c41a',\r\n  NotFound: '#1890ff',\r\n  Maintenance: '#faad14',\r\n  Selected: 'cyan'\r\n}\r\n\r\nfunction siteToMarker(site) {\r\n  const marker = new OLFeature({\r\n    geometry: new OLPoint(OLfromLonLat([site.longitude, site.latitude])),\r\n    label: site.name\r\n  })\r\n  marker.setId(site.id)\r\n  marker.set('status', site.status)\r\n  marker.setStyle(\r\n    new OLStyle({\r\n      image: new OLIcon({\r\n        color: statusColor[site.status],\r\n        src: dot\r\n      })\r\n    })\r\n  )\r\n  return marker\r\n}\r\n\r\nfunction updateMarkers(map, sites, onSelect) {\r\n  if (!map) {\r\n    return\r\n  }\r\n\r\n  let layer = map.getLayers().item(1)\r\n\r\n  if (!layer) {\r\n    layer = new OLVectorLayer()\r\n    map.addLayer(layer)\r\n    layer.setZIndex(10)\r\n  }\r\n\r\n  const markers = sites.map(site => siteToMarker(site))\r\n  const source = new OLVectorSource({ features: markers })\r\n\r\n  layer.setSource(source)\r\n\r\n  if (onSelect) {\r\n    addSelectInteraction(map, layer, onSelect)\r\n  }\r\n\r\n  setTimeout(() => source.refresh(), 10)\r\n  console.log('updateMarkers()')\r\n}\r\n\r\nfunction setMarkerColor(map, id, color) {\r\n  if (!map) {\r\n    return\r\n  }\r\n  const source = map\r\n    .getLayers()\r\n    .item(1)\r\n    .getSource()\r\n  const marker = source.getFeatureById(id)\r\n\r\n  if (marker) {\r\n    marker.getStyle().setImage(\r\n      new OLIcon({\r\n        color: color,\r\n        src: dot\r\n      })\r\n    )\r\n\r\n    setTimeout(() => source.refresh(), 10)\r\n  }\r\n}\r\n\r\nfunction addSelectInteraction(map, layer, onSelect) {\r\n  const select = new Select({ layers: [layer] })\r\n\r\n  map.addInteraction(select)\r\n\r\n  select.on('select', evt => {\r\n    // evt.deselected.forEach(marker =>\r\n    //   marker.getStyle().setImage(\r\n    //     new OLIcon({\r\n    //       color: statusColor[marker.get('status')],\r\n    //       src: dot\r\n    //     })\r\n    //   )\r\n    // )\r\n\r\n    // select.getFeatures().forEach(marker =>\r\n    //   marker.getStyle().setImage(\r\n    //     new OLIcon({\r\n    //       color: statusColor['Selected'],\r\n    //       src: dot\r\n    //     })\r\n    //   )\r\n    // )\r\n\r\n    if (onSelect) {\r\n      const marker = select.getFeatures().getArray()[0]\r\n      const key = marker && marker.getId()\r\n      onSelect(key)\r\n    }\r\n  })\r\n}\r\n\r\nconst map = {\r\n  instance: null,\r\n  updateMarkers: (sites, onSelect) =>\r\n    updateMarkers(map.instance, sites, onSelect),\r\n  setMarkerColor: (site, color) =>\r\n    setMarkerColor(map.instance, site.id, color || statusColor[site.status])\r\n}\r\n\r\nexport const buildMap = () => {\r\n  map.instance = new OLMap({\r\n    target: 'map',\r\n    controls: [],\r\n    view: new OLView({\r\n      center: OLfromLonLat([27.0, 38.0]),\r\n      zoom: 7\r\n    })\r\n  })\r\n\r\n  apply(map.instance, darklayer)\r\n\r\n  return map\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { Icon as AntdIcon, Divider as AntdDivider } from 'antd'\r\nimport classes from './Map.module.sass'\r\nimport { statusColor } from './mapBuilder'\r\n\r\n// `${site.name}: ${message.previousStatus} -> ${message.currentStatus}`\r\n\r\nconst MapAlarm = ({ alarm, isExpanded }) => (\r\n  <p style={{ fontSize: 12, fontWeight: 'bolder' }}>\r\n    <span style={{ color: statusColor[alarm.currentStatus] }}>\r\n      [{new Date().toLocaleTimeString('el-GR')}]\r\n    </span>\r\n    <span style={{ color: 'white' }}>{alarm.name}</span>\r\n    <span style={{ color: statusColor[alarm.previousStatus] }}>\r\n      {alarm.previousStatus}\r\n    </span>\r\n    <span style={{ color: 'white' }}>&rarr;</span>\r\n    <span style={{ color: statusColor[alarm.currentStatus] }}>\r\n      {alarm.currentStatus}\r\n    </span>\r\n    {isExpanded && <span>({alarm.message})</span>}\r\n  </p>\r\n)\r\n\r\nconst MapAlarms = ({ alarms }) => {\r\n  const containerRef = useRef(null)\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n\r\n  function expand() {\r\n    containerRef.current.style.height = 'calc(100% - 40px)'\r\n    containerRef.current.style.width = '60vw'\r\n    setIsExpanded(true)\r\n  }\r\n\r\n  function shrink() {\r\n    containerRef.current.style.height = '200px'\r\n    containerRef.current.style.width = '450px'\r\n    setIsExpanded(false)\r\n  }\r\n\r\n  return (\r\n    <div className={classes.AlarmsContainer} ref={containerRef}>\r\n      <div className={classes.AlarmsContent}>\r\n        <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n          {!isExpanded ? (\r\n            <span className=\"is-link\" onClick={expand}>\r\n              <AntdIcon\r\n                type=\"arrows-alt\"\r\n                title=\"Μεγιστοποίηση\"\r\n                style={{ fontWeight: 'bolder' }}\r\n              />\r\n            </span>\r\n          ) : (\r\n            <span className=\"is-link\" onClick={shrink}>\r\n              <AntdIcon\r\n                type=\"shrink\"\r\n                title=\"Ελαχιστοποίηση\"\r\n                style={{ fontWeight: 'bolder' }}\r\n              />\r\n            </span>\r\n          )}\r\n        </div>\r\n        {alarms.map((alarm, idx) => (\r\n          <MapAlarm key={idx} alarm={alarm} isExpanded={isExpanded} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MapAlarms\r\n","import React from 'react'\r\nimport { Icon as AntdIcon, Select as AntdSelect } from 'antd'\r\nimport classes from './Map.module.sass'\r\nimport { statusColor } from './mapBuilder'\r\n\r\nconst viewFilter = [\r\n  { id: 0, title: 'ΟΚ' },\r\n  { id: 1, title: 'Maintenance' },\r\n  { id: 2, title: 'Alarm' },\r\n  { id: 3, title: 'NotFound' }\r\n]\r\nconst handleChange = value => {\r\n  console.log(`selected ${value}`)\r\n}\r\nconst options = viewFilter.map(o => (\r\n  <AntdSelect.Option key={o.id}>{o.title}</AntdSelect.Option>\r\n))\r\n\r\nconst MapSiteList = ({ sites, onSelect }) => {\r\n  function handleSelect(site) {\r\n    onSelect(site.id)\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <div className={classes.DropdownInput}>\r\n        <AntdSelect\r\n          dropdownClassName={classes.Dropdown}\r\n          mode=\"tags\"\r\n          style={{ width: '100%' }}\r\n          placeholder=\"Επιλέξτε Προβολή\"\r\n          onChange={handleChange}\r\n          allowClear={true}>\r\n          {options}\r\n        </AntdSelect>\r\n      </div>\r\n      <div className={classes.StatusContainer}>\r\n        {sites.map(site => (\r\n          <div\r\n            key={site.id}\r\n            className={classes.SiteRow}\r\n            onClick={() => handleSelect(site)}>\r\n            <AntdIcon\r\n              type={\r\n                site.status === 'Alarm' ? 'exclamation-circle' : 'info-circle'\r\n              }\r\n              theme=\"twoTone\"\r\n              twoToneColor={statusColor[site.status]}\r\n            />\r\n            <span className=\"is-link\">{' ' + site.name}</span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default MapSiteList\r\n","import React from 'react'\r\nimport { Typography as AntdTypography, Icon as AntdIcon } from 'antd'\r\nimport classes from './Map.module.sass'\r\nimport { statusColor } from './mapBuilder'\r\n\r\nconst StartOrStopMaintenanceButton = ({\r\n  site,\r\n  onMaintenanceStart,\r\n  onMaintenanceStop\r\n}) => {\r\n  if (site.status === 'Maintenance') {\r\n    return (\r\n      <span className=\"is-link\" onClick={onMaintenanceStop}>\r\n        <AntdIcon type=\"stop\" style={{ marginRight: '5px' }} />\r\n        Stop Maintenance\r\n      </span>\r\n    )\r\n  }\r\n  return (\r\n    <span className=\"is-link\" onClick={onMaintenanceStart}>\r\n      <AntdIcon type=\"play-circle\" style={{ marginRight: '5px' }} />\r\n      Start Maintenance\r\n    </span>\r\n  )\r\n}\r\n\r\nconst MapSiteDetails = ({\r\n  site,\r\n  onClose,\r\n  onMaintenanceStart,\r\n  onMaintenanceStop\r\n}) => {\r\n  return (\r\n    <div className={classes.SiteView}>\r\n      <AntdTypography.Title level={4} className={classes.SiteViewHeader}>\r\n        {site.name}\r\n        <span className=\"is-right is-link\" onClick={onClose}>\r\n          <AntdIcon type=\"close\" />\r\n        </span>\r\n      </AntdTypography.Title>\r\n      <AntdTypography.Paragraph className={classes.SiteViewParagraph}>\r\n        <span style={{ fontSize: 18 }}>\r\n          <AntdIcon\r\n            type=\"environment\"\r\n            theme=\"twoTone\"\r\n            twoToneColor={statusColor[site.status]}\r\n          />{' '}\r\n          Status {site.status}\r\n        </span>\r\n        <div style={{ marginTop: 10 }}>\r\n          <AntdTypography.Text>Σελίδες</AntdTypography.Text>\r\n        </div>\r\n        <ul>\r\n          {site.pages.map((s, i) => (\r\n            <li key={i}>\r\n              <a target=\"blank\" href={s.uri}>\r\n                {s.uri}\r\n              </a>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <div>\r\n          <StartOrStopMaintenanceButton\r\n            site={site}\r\n            onMaintenanceStart={onMaintenanceStart}\r\n            onMaintenanceStop={onMaintenanceStop}\r\n          />\r\n        </div>\r\n      </AntdTypography.Paragraph>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MapSiteDetails\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { Row as AntdRow, Col as AntdCol } from 'antd'\r\nimport hubConnectionBuilder from '../../services/hubConnectionBuilder'\r\n\r\nimport api from '../../services/api'\r\nimport Map from './Map'\r\nimport MapAlarms from './MapAlarms'\r\nimport MapSiteList from './MapSiteList'\r\nimport MapSiteDetails from './MapSiteDetails'\r\n\r\nconst HUB_URL = `${process.env.REACT_APP_API_URL}/guard`\r\n\r\nconst MapContainer = () => {\r\n  const hub = useRef(null)\r\n  const [sites, setSites] = useState([])\r\n  const [messages, setMessages] = useState([])\r\n  const [selected, setSelected] = useState(null)\r\n  const [selectedSite, setSelectedSite] = useState(null)\r\n\r\n  function getSites() {\r\n    api.get('/api/sites').then(res => setSites(res))\r\n  }\r\n\r\n  async function onMaintenanceStart() {\r\n    console.log('starting maintenace for', selectedSite.name)\r\n    await api.get(`/api/sites/${selected}/maintenance/start`)\r\n    console.log('maintenance started')\r\n    getSites()\r\n  }\r\n\r\n  async function onMaintenanceStop() {\r\n    console.log('stopping maintenace for', selectedSite.name)\r\n    await api.get(`/api/sites/${selected}/maintenance/stop`)\r\n    console.log('maintenance stopped')\r\n    getSites()\r\n  }\r\n\r\n  useEffect(() => {\r\n    getSites()\r\n\r\n    hubConnectionBuilder(HUB_URL)\r\n      .then(con => {\r\n        hub.current = con\r\n\r\n        hub.current.on('SiteStatusChanged', message => {\r\n          console.info(\r\n            `${message.name}: ${message.previousStatus} -> ${\r\n              message.currentStatus\r\n            }`\r\n          )\r\n          setMessages(messages => [message, ...messages.slice(-100)])\r\n        })\r\n\r\n        hub.current.on('SiteGuardingException', message => {\r\n          console.log('unhandled message:', message)\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.error(err)\r\n        hub.current = null\r\n      })\r\n\r\n    return () => {\r\n      if (hub.current) {\r\n        hub.current.stop()\r\n        hub.current = null\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setSelectedSite(selected ? sites.find(x => x.id === selected) : null)\r\n  }, [sites, selected])\r\n\r\n  return (\r\n    <div style={{ height: '100%' }}>\r\n      <AntdRow style={{ height: '100%' }}>\r\n        <AntdCol xxl={20} xl={19} lg={18} md={16} style={{ height: '100%' }}>\r\n          <Map sites={sites} onSelect={setSelected} />\r\n        </AntdCol>\r\n        <AntdCol\r\n          xxl={4}\r\n          xl={5}\r\n          lg={6}\r\n          md={8}\r\n          style={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n          <MapSiteList\r\n            sites={sites}\r\n            onSelect={setSelected}\r\n            style={{ flexGrow: 1 }}\r\n          />\r\n          {selectedSite && (\r\n            <MapSiteDetails\r\n              site={selectedSite}\r\n              onClose={() => setSelected(null)}\r\n              onMaintenanceStart={onMaintenanceStart}\r\n              onMaintenanceStop={onMaintenanceStop}\r\n            />\r\n          )}\r\n        </AntdCol>\r\n      </AntdRow>\r\n      <MapAlarms alarms={messages} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MapContainer\r\n","import React from 'react'\r\nimport { Tag } from 'antd'\r\nimport storage from './storage'\r\nexport const calculateStatus = date => {\r\n  const _d = new Date(date)\r\n  const d = new Date()\r\n  return _d.getTime() > d.getTime() ? (\r\n    <Tag color=\"#40861d\">Ενεργό</Tag>\r\n  ) : (\r\n      <Tag color=\"red\">Ανενεργό</Tag>\r\n    )\r\n}\r\n\r\nexport const getCurrentMember = () => {\r\n  const user = storage.get('auth')\r\n  return user\r\n    ? { userId: user.userid, email: user.email, name: user.title }\r\n    : null\r\n}\r\n\r\nexport const priority = {\r\n  0: <Tag color=\"#40861d\">Normal</Tag>,\r\n  1: <Tag color=\"#2db7f5\">Low</Tag>,\r\n  2: <Tag color=\"red\">High</Tag>,\r\n  3: <Tag color=\"volcano\">Urgent</Tag>\r\n}\r\n\r\n\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Table, Row, Col, PageHeader, Divider, Button, List, Typography as T } from 'antd'\r\nimport { NavLink } from 'react-router-dom'\r\nimport api from '../../services/api'\r\nimport { calculateStatus } from '../../services/CommonFunctions'\r\nimport moment from 'moment'\r\nconst formItemLayout = {\r\n  xs: { span: 24 },\r\n  sm: { span: 24 },\r\n  md: { span: 24 },\r\n  lg: { span: 24 },\r\n  xl: { span: 20 },\r\n  xxl: { span: 18 }\r\n}\r\nconst Books = props => {\r\n  const [data, setData] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const isMobile = window.innerWidth <= 760\r\n  const columns = [\r\n    {\r\n      title: 'Τίτλος',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      sorter: true,\r\n      render: (e, row) => (\r\n        <NavLink to={'/book/monitor/' + row.id}>{row.name}</NavLink>\r\n      )\r\n    },\r\n    {\r\n      title: 'Λήξη',\r\n      dataIndex: 'close',\r\n      key: 'close',\r\n      sorter: true,\r\n      render: item => moment(item).format('L')\r\n    },\r\n    {\r\n      title: 'Συντάκτης',\r\n      dataIndex: 'owner.name',\r\n      key: 'owner'\r\n    },\r\n    {\r\n      title: 'Γεγονότα',\r\n      dataIndex: 'entriesCount',\r\n      key: 'entriesCount'\r\n    },\r\n    {\r\n      title: 'Μέλη',\r\n      dataIndex: 'membersCount',\r\n      key: 'membersCount'\r\n    },\r\n    {\r\n      title: 'Κατάσταση',\r\n      dataIndex: 'status',\r\n      sorter: true,\r\n      key: 'status',\r\n      render: (e, row) => calculateStatus(row.close)\r\n    },\r\n    {\r\n      title: 'Ενέργειες',\r\n      key: 'action',\r\n      render: (e, row) => (\r\n        <span>\r\n          <NavLink to={'/book/' + row.id}>επεξεργασία</NavLink>\r\n          <Divider type=\"vertical\" />\r\n          <NavLink to={'/book/monitor/' + row.id}>προβολή</NavLink>\r\n        </span>\r\n      )\r\n    }\r\n  ]\r\n  const handleTableChange = (pagination, filters, sorter) => {\r\n    if (sorter && sorter.field) {\r\n      const sorted = sorter.order === \"ascend\" ? data.reverse(x => x[sorter.field]) :\r\n        data.reverse(x => x[sorter.field])\r\n      setData(last => [...sorted])\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    api.get('/api/logbooks').then(res => {\r\n      setData(res)\r\n      setLoading(false)\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <Row type=\"flex\" justify=\"center\" align=\"top\">\r\n      <Col span={24}>\r\n        <PageHeader\r\n          subTitle=\" Σύντομη ανασκόπηση συμβάντων ταξινομημένα κατα ημερομηνία\"\r\n          title=\"Συμβάντα\"\r\n          onBack={() => window.history.back()}\r\n          extra={[\r\n            <Button\r\n              key=\"0\"\r\n              type=\"default\"\r\n              size=\"small\"\r\n              className=\"has-text-primary\"\r\n              onClick={null}>\r\n              Ανανέωση\r\n            </Button>,\r\n            <Button\r\n              key=\"1\"\r\n              type=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => props.history.push('/book/new')}>\r\n              Προθήκη Νέου\r\n            </Button>\r\n          ]}\r\n        />\r\n      </Col>\r\n      <Col {...formItemLayout} style={{ padding: 10 }}>\r\n        {isMobile ? <List\r\n          dataSource={data}\r\n          renderItem={item => (\r\n            <List.Item key={item.id}>\r\n              <List.Item.Meta\r\n                title={item.name}\r\n                description={<div><T.Text type=\"secondary\">Ημ/νια λήξης: {moment(item).format('L')}</T.Text>\r\n                  <div>\r\n                    <NavLink to={'/book/' + item.id}>επεξεργασία</NavLink>\r\n                    <Divider type=\"vertical\" />\r\n                    <NavLink to={'/book/monitor/' + item.id}>προβολή</NavLink></div>\r\n                </div>}\r\n              />\r\n              <div>{calculateStatus(item.close)}</div>\r\n            </List.Item>\r\n          )}\r\n        >\r\n        </List> :\r\n          <Table loading={loading}\r\n            rowKey={record => record.id}\r\n            columns={columns}\r\n            dataSource={data}\r\n            onChange={handleTableChange}\r\n            pagination={{ defaultPageSize: 15, hideOnSinglePage: true }}\r\n          />}\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport default Books\r\n","import React, { useState, useEffect } from 'react'\r\nimport {\r\n  PageHeader,\r\n  Popconfirm,\r\n  DatePicker,\r\n  Row,\r\n  Form,\r\n  Icon,\r\n  Input,\r\n  Button,\r\n  Col,\r\n  Transfer,\r\n  Divider,\r\n  notification\r\n} from 'antd'\r\nimport api from '../../services/api'\r\nimport { getCurrentMember } from '../../services/CommonFunctions'\r\nimport './Books.sass'\r\nimport moment from 'moment'\r\nconst formItemLayout = {\r\n  xs: { span: 24 },\r\n  sm: { span: 24 },\r\n  md: { span: 24 },\r\n  lg: { span: 18 },\r\n  xl: { span: 12 },\r\n  xxl: { span: 10 }\r\n}\r\nconst locale = {\r\n  itemUnit: 'Χρήστες',\r\n  itemsUnit: 'Χρήστες',\r\n  searchPlaceholder: 'Αναζήτηση'\r\n}\r\nconst member = getCurrentMember()\r\nconst Book = props => {\r\n  const id = props.match.params.id ? props.match.params.id : null\r\n  const title = id ? 'Επεξεργασία Συμβάν' : 'Νέο Συμβάν'\r\n  const [usersToSelect, setUsersToSelect] = useState([])\r\n  const [usersSelected, setUsersSelected] = useState([])\r\n  const [book, setBook] = useState({\r\n    close: new Date(),\r\n    name: null\r\n  })\r\n\r\n  const bookHandler = event => {\r\n    setBook({\r\n      ...book,\r\n      name: event.target.value\r\n    })\r\n  }\r\n\r\n  const usersHandler = nextTargetKeys => {\r\n    setUsersSelected(last => [...nextTargetKeys])\r\n    setBook({\r\n      ...book,\r\n      members: usersToSelect.filter(f => nextTargetKeys.some(s => s === f.key))\r\n    })\r\n  }\r\n\r\n  const dateHandler = d => {\r\n    if (d._d) {\r\n      setBook({ ...book, close: d._d })\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    console.log(id)\r\n    if (id) {\r\n      api.get(`/api/logbooks/${id}`).then(res => {\r\n        if (!res) {\r\n          props.history.push(`/books`)\r\n          return\r\n        }\r\n        const d = new Date(res.close)\r\n        const m = res.members.map(x => {\r\n          return x.userId\r\n        })\r\n        setUsersSelected([...m])\r\n        setBook({\r\n          ...res,\r\n          close: d\r\n        })\r\n      })\r\n    } else {\r\n      setBook({\r\n        close: new Date(),\r\n        name: null\r\n      })\r\n    }\r\n    api\r\n      .get('/api/logbooks/members')\r\n      .then(res => (res ? setUsersToSelect([...res]) : null))\r\n  }, [id])\r\n\r\n  const handleSubmit = evt => {\r\n    evt.preventDefault()\r\n    if (id) {\r\n      api.put(`/api/logbooks/${id}`, book).then(res => {\r\n        notification['success']({\r\n          message: 'Επιτυχής καταχώρηση'\r\n        })\r\n      })\r\n    } else {\r\n      api.post('/api/logbooks', createBody()).then(res => {\r\n        if (res) {\r\n          props.history.push(`/book/${res.id}`)\r\n          notification['success']({\r\n            message: 'Επιτυχής καταχώρηση'\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  const handleDelete = () => {\r\n    api.delete(`/api/logbooks/${id}`).then(res => {\r\n      props.history.push('/books')\r\n      notification['success']({\r\n        message: 'Επιτυχής διαγραφή'\r\n      })\r\n    })\r\n  }\r\n\r\n  const deleteButton = id ? (\r\n    <Popconfirm\r\n      key=\"1\"\r\n      title=\"Θέλετε σίγουρα να διαγράψετε το αρχείο?\"\r\n      onConfirm={handleDelete}\r\n      onCancel={null}\r\n      okText=\"Ναι\"\r\n      cancelText=\"Όχι\">\r\n      <Button type=\"danger\" size=\"small\" className=\"mr-2\">\r\n        διαγραφή\r\n      </Button>\r\n    </Popconfirm>\r\n  ) : null\r\n\r\n  const bookMonitorLink = id ? (\r\n    <Button\r\n      key=\"0\"\r\n      size=\"small\"\r\n      className=\"has-text-primary mr-2\"\r\n      onClick={() => {\r\n        props.history.push('/book/monitor/' + id)\r\n      }}>\r\n      {' '}\r\n      προβολή{' '}\r\n    </Button>\r\n  ) : null\r\n  const createBody = () => {\r\n    return {\r\n      owner: member,\r\n      close: book.date,\r\n      members: usersToSelect.filter(f => usersSelected.some(s => s === f.key)),\r\n      name: book.name\r\n    }\r\n  }\r\n  return (\r\n    <Form onSubmit={handleSubmit}>\r\n      <Row type=\"flex\" justify=\"center\">\r\n        <Col span={24}>\r\n          <PageHeader\r\n            onBack={() => window.history.back()}\r\n            title={title}\r\n            subTitle=\"Δημιουργία Συμβάν και προσθήκη μελών\"\r\n            extra={[\r\n              bookMonitorLink,\r\n              deleteButton,\r\n              <Button key=\"3\" type=\"primary\" size=\"small\" htmlType=\"submit\">\r\n                Αποθήκευση\r\n              </Button>\r\n            ]}\r\n          />\r\n        </Col>\r\n        <Col\r\n          {...formItemLayout}\r\n          style={{ padding: 10 }}\r\n          className=\"has-background-dark mt-2\">\r\n          <Divider>Λεπτομέρειες</Divider>\r\n          <Form.Item label=\"Τίτλος\">\r\n            <Input\r\n              prefix={<Icon type=\"folder-open\" />}\r\n              name=\"name\"\r\n              value={book.name}\r\n              placeholder=\"Τίτλος Συμβάν\"\r\n              onChange={bookHandler}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item label=\"Ημ/νια Λήξης\">\r\n            <DatePicker\r\n              value={moment(book.close, 'L')}\r\n              placeholder=\"Επιλογή Ημ/νιας\"\r\n              onChange={dateHandler}\r\n              className=\"is-fullwidth\"\r\n            />\r\n          </Form.Item>\r\n          <Divider>Επιλογή μέλών για προβολή/επεξεργασία</Divider>\r\n          <Form.Item label=\"\">\r\n            <Transfer\r\n              locale={locale}\r\n              titles={['Επιλογή', 'Επιλεγμένοι']}\r\n              rowKey={record => record.userId}\r\n              dataSource={usersToSelect}\r\n              showSearch\r\n              listStyle={{\r\n                height: 400\r\n              }}\r\n              targetKeys={usersSelected}\r\n              onChange={usersHandler}\r\n              render={item => `${item.name}`}\r\n            />\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n    </Form>\r\n  )\r\n}\r\n\r\nexport default Book\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Form, DatePicker, Input, Select, Modal, notification, Button, Tag } from 'antd'\r\nimport api from '../../services/api'\r\nimport { getCurrentMember } from '../../services/CommonFunctions'\r\nimport moment from 'moment'\r\nconst Option = Select.Option\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: { span: 24 },\r\n    sm: { span: 8 }\r\n  },\r\n  wrapperCol: {\r\n    xs: { span: 24 },\r\n    sm: { span: 16 }\r\n  }\r\n}\r\nconst currentUser = getCurrentMember()\r\nconst dateFormat = 'YYYY/MM/DD HH:mm'\r\nconst LogEntry = props => {\r\n  const [recipients, setRecipients] = useState([])\r\n  const initData = {\r\n    ...props.data,\r\n    'issuer': props.data.id ? props.data.issuer : currentUser\r\n  }\r\n  const [log, setLog] = useState({ ...initData })\r\n  const isCompleted = log.status === 1;\r\n  useEffect(() => {\r\n    api.get('/api/logbooks/members').then(res => setRecipients(res))\r\n  }, [])\r\n\r\n  const canEdit = () => {\r\n    return log.issuer.userId === currentUser.userId ||\r\n      log.recipient.userId === currentUser.userId\r\n  }\r\n  const handleFields = (value, field) => {\r\n    if (field === 'recipient') {\r\n      value = recipients.find(x => x.userId === value)\r\n    }\r\n    setLog({\r\n      ...log,\r\n      [field]: value\r\n    })\r\n  }\r\n  const children = recipients.map(rec => (\r\n    <Option key={rec.userId} value={rec.userId}>\r\n      {rec.name}\r\n    </Option>\r\n  ))\r\n\r\n  const submitHandler = () => {\r\n    if (isCompleted) {\r\n      props.onClose(null, true)\r\n      return\r\n    }\r\n    if (log.id) {\r\n      api\r\n        .put(`/api/logbooks/${log.logBookId}/entries/${log.id}`, log)\r\n        .then(res => {\r\n          notification['success']({\r\n            message: 'Επιτυχής καταχώρηση',\r\n          })\r\n          props.onClose(log, true)\r\n        })\r\n    } else {\r\n      api\r\n        .post(`/api/logbooks/${log.logBookId}/entries`, log)\r\n        .then(res => {\r\n          notification['success']({\r\n            message: 'Επιτυχής καταχώρηση',\r\n          })\r\n          props.onClose(log, true)\r\n        })\r\n    }\r\n  }\r\n\r\n  const completeEntry = () => {\r\n    api\r\n      .get(`/api/logbooks/${log.logBookId}/entries/${log.id}/close`)\r\n      .then(res => {\r\n        notification['success']({\r\n          message: 'Επιτυχής καταχώρηση',\r\n        })\r\n        props.onClose(res, true)\r\n      })\r\n  }\r\n\r\n  const completionTimeButton = isCompleted ?\r\n    <Tag color=\"#40861d\">{moment(log.completionTime).format('LLL')}</Tag> :\r\n     <Button disabled={!canEdit()} type=\"primary\" onClick={completeEntry} block>Ολοκλήρωση</Button> \r\n\r\n  return (\r\n    <Modal\r\n      title={log && log.id ? 'Νέο Γεγονός' : 'Επεξεργασία'}\r\n      visible={true}\r\n      onOk={submitHandler}\r\n      cancelButtonProps={{ type: 'danger' }}\r\n      onCancel={() => props.onClose(null)}>\r\n      <Form {...formItemLayout}>\r\n        <Form.Item label=\"Τίτλος\">\r\n          <Input disabled={isCompleted || !canEdit()}\r\n            value={log.title}\r\n            onChange={e => handleFields(e.target.value, 'title')}\r\n          />\r\n        </Form.Item>\r\n        <Form.Item label=\"Περιγραφή\">\r\n          <Input disabled={isCompleted || !canEdit()}\r\n            value={log.description}\r\n            onChange={e => handleFields(e.target.value, 'description')}\r\n          />\r\n        </Form.Item>\r\n        <Form.Item label=\"Παραλήπτης\">\r\n          <Select\r\n            showSearch disabled={isCompleted || !canEdit()}\r\n            defaultValue={log && log.recipient ? log.recipient.userId : null}\r\n            placeholder=\"Επιλογή παραλήπτη\"\r\n            optionFilterProp=\"name\"\r\n            onSelect={id => handleFields(id, 'recipient')}\r\n            filterOption={(input, option) =>\r\n              option.props.children\r\n                .toLowerCase()\r\n                .indexOf(input.toLowerCase()) >= 0\r\n            }>\r\n            {children}\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item label=\"Προτεραιότητα\">\r\n          <Select\r\n            defaultValue={log.priority} disabled={isCompleted || !canEdit()}\r\n            onChange={e => handleFields(e, 'priority')}>\r\n            <Option value={0}>Normal</Option>\r\n            <Option value={1}>Low</Option>\r\n            <Option value={2}>High</Option>\r\n            <Option value={3}>Urgent</Option>\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item label=\"Ενέργειες\">\r\n          <Input.TextArea disabled={isCompleted || !canEdit()} placeholder=\"Ενέργειες παραλήπτη\" value={log.actions}\r\n            onChange={e => handleFields(e.target.value, 'actions')}\r\n            autosize={{ minRows: 2, maxRows: 4 }} />\r\n        </Form.Item>\r\n        <Form.Item label=\"DTG\">\r\n          <DatePicker disabled={isCompleted || !canEdit()}\r\n            defaultValue={log.dtg ? moment(log.dtg, dateFormat) : null}\r\n            className=\"is-fullwidth\"\r\n            onChange={date => handleFields(date._d, 'dtg')}\r\n            placeholder=\"DateTime given\"\r\n          />\r\n        </Form.Item>\r\n        <Form.Item label=\"ECT\">\r\n          <DatePicker disabled={isCompleted || !canEdit()}\r\n            defaultValue={log.ect ? moment(log.ect, dateFormat) : null}\r\n            className=\"is-fullwidth\"\r\n            onChange={date => handleFields(date._d, 'ect')}\r\n            placeholder=\"DateTime of completion\"\r\n          />\r\n        </Form.Item>\r\n        {log.id ? <Form.Item label=\"Ολοκλήρωση\">\r\n          {completionTimeButton}\r\n        </Form.Item> : null}\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default LogEntry\r\n","import React from 'react'\r\nimport { Table, Divider, Tag, Tooltip, Popconfirm, message } from 'antd'\r\nimport moment from 'moment'\r\nimport { getCurrentMember } from '../../services/CommonFunctions'\r\nimport { priority } from '../../services/CommonFunctions'\r\nconst currentUser = getCurrentMember()\r\nconst BookEntries = props => {\r\n  const canDeleteOrEdit = (row) => {\r\n    return row.issuer.userId === currentUser.userId ||\r\n      row.recipient.userId === currentUser.userId\r\n  }\r\n  const columns = [\r\n    {\r\n      title: <Tooltip title=\"Προτεραιότητα\">Π</Tooltip>,\r\n      dataIndex: 'priority',\r\n      key: 'priority',\r\n      render: p => priority[p]\r\n    },\r\n    {\r\n      title: 'DTG',\r\n      dataIndex: 'dtg',\r\n      key: 'dtg',\r\n      render: item => moment(item).format('L')\r\n    },\r\n    {\r\n      title: 'Εκδότης',\r\n      dataIndex: 'issuer',\r\n      key: 'issuer',\r\n      render: item => item.name\r\n    },\r\n    {\r\n      title: 'Παραλήπτης',\r\n      dataIndex: 'recipient',\r\n      key: 'recipient',\r\n      render: item => item.name\r\n    },\r\n    {\r\n      title: 'Τίτλος',\r\n      dataIndex: 'title',\r\n      key: 'title'\r\n    },\r\n    {\r\n      title: 'Περιγραφή',\r\n      dataIndex: 'description',\r\n      key: 'description'\r\n    },\r\n    {\r\n      title: 'Κατάσταση',\r\n      dataIndex: 'status',\r\n      key: 'status',\r\n      render: s =>\r\n        s === 1 ? (\r\n          <Tag color=\"magenta\">Close</Tag>\r\n        ) : (\r\n            <Tag color=\"#40861d\">Open</Tag>\r\n          )\r\n    },\r\n    {\r\n      title: 'Ενέργειες',\r\n      key: 'action',\r\n      render: (e, row) => (\r\n        <span>\r\n          <span className=\"is-link\" onClick={() => props.edit(row)}>\r\n            {canDeleteOrEdit(row) ? 'επεξεργασία' : 'προβολή'}\r\n          </span>\r\n          {canDeleteOrEdit(row) ?\r\n            <span><Divider type=\"vertical\" />\r\n              <Popconfirm\r\n                title=\"Θέλετε σίγουρα να αφαιρέσετε το γεγονός?\"\r\n                onConfirm={() => props.onDelete(row)}\r\n                onCancel={null}\r\n                okText=\"Ναι\"\r\n                cancelText=\"Όχι\">\r\n                <span className=\"is-danger\">διαγραφή</span>\r\n              </Popconfirm></span> : null}\r\n        </span>\r\n      )\r\n    }\r\n  ]\r\n\r\n  return <Table style={{ padding: 10 }} rowKey=\"id\" columns={columns} dataSource={props.data} />\r\n}\r\n\r\nexport default BookEntries\r\n","import React, { useState, useRef, useEffect } from 'react'\r\nimport { Icon, Input, Tooltip, Timeline, Typography as T } from 'antd'\r\nimport moment from 'moment'\r\nimport { getCurrentMember } from '../../services/CommonFunctions'\r\nconst currentUser = getCurrentMember()\r\nconst BookChat = () => {\r\n    const [messages, setMessages] = useState([{\r\n        name: 'Τασος', date: '2019-04-29', message: 'Καλημερα'\r\n    }])\r\n    const chatmessages = useRef();\r\n    const messageRef = useRef();\r\n\r\n    const messageHandler = () => {\r\n        const m = {\r\n            name: currentUser.name, date: new Date(),\r\n            message: messageRef.current.input.state.value\r\n        }\r\n        messageRef.current.input.state.value = ''\r\n        setMessages([...messages, m])\r\n    }\r\n    const clearMessages = () => {\r\n        setMessages([])\r\n    }\r\n    \r\n    useEffect(() => {\r\n        chatmessages.current.scrollIntoView({ behavior: 'smooth' })\r\n    }, [messages])\r\n\r\n    const empty = <div className=\"has-text-centered mt-2\">\r\n        <Icon type=\"wechat\" style={{ fontSize: 30 }} />\r\n        <p>Δεν υπάρχουν μηνύματα</p>\r\n    </div>\r\n    const hasChat = messages.length > 0 ? 'chat-flexend' : ''\r\n    const chat = messages.map((m, i) => {\r\n        const isCurrent = currentUser.name === m.name\r\n        const mode = isCurrent ? 'right' : 'left'\r\n        return <Timeline mode={mode} key={i} style={{ padding: 15, flexShrink: 0 }}>\r\n            <Timeline.Item color=\"#4cc7c3\" dot={<Icon type=\"message\" theme=\"filled\" style={{ color: '#fff ' }} />} >\r\n                <div className=\"mb-2\">{isCurrent ? null : <span className=\"has-text-primary\">{m.name} </span>}\r\n                    <T.Text type=\"secondary\">\r\n                        <Tooltip title={moment(m.date).format('YYYY-MM-DD HH:mm:ss')}>\r\n                            <span>{moment(m.date).fromNow()}</span>\r\n                        </Tooltip></T.Text>\r\n                    {isCurrent ? <span className=\"has-text-primary\"> {m.name} </span> : null}\r\n                </div>\r\n                <span className=\"chat-message\">{m.message}</span>\r\n            </Timeline.Item>\r\n        </Timeline>\r\n    })\r\n    const content = messages.length === 0 ? empty : chat;\r\n    return (\r\n        <div className={'chat-sidedrawer ' + hasChat}>\r\n            <div className=\"chat-header\"><span className=\"chat-header-title\">Chat</span>\r\n                <span className=\"is-link is-right\" onClick={clearMessages}>καθαρισμός</span></div>\r\n            <div className=\"chat-messages\">\r\n                {content}\r\n                <div ref={chatmessages} />\r\n            </div>\r\n            <Input.Search className=\"chat-input\"\r\n                placeholder=\"Το μηνυμά σας\"\r\n                enterButton={<Icon type=\"caret-right\" />}\r\n                size=\"large\"\r\n                ref={messageRef}\r\n                onSearch={messageHandler}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BookChat;","import React from 'react';\r\nimport { List, Icon, Popconfirm, message } from 'antd';\r\n\r\nconst confirm = () => {\r\n    message.info('Συντομα κοντά σας')\r\n}\r\n\r\nconst BookMembers = props => {\r\n    return (\r\n        <List style={{ padding: 10 }}\r\n            itemLayout=\"horizontal\"\r\n            dataSource={props.members}\r\n            renderItem={item => (\r\n                <List.Item \r\n                // actions={[<Popconfirm title=\"Θέλετε σίγουρα να αφαιρέσετε τον χρήστη?\"\r\n                //  onConfirm={confirm} onCancel={null} okText=\"Ναι\" cancelText=\"Όχι\">\r\n                //     <span className=\"is-danger\">διαγραφή</span>\r\n                // </Popconfirm>\r\n                // ]}\r\n                >\r\n                    <List.Item.Meta\r\n                        avatar={<Icon type=\"user\" style={{ fontSize: 40 }} />}\r\n                        title={<span className=\"has-text-primary\">{item.name}</span>}\r\n                        description={item.email} />\r\n\r\n                </List.Item>\r\n            )}\r\n        />\r\n    );\r\n};\r\n\r\nexport default BookMembers;","import React, { useEffect, useState } from 'react'\r\nimport { Row, Col, PageHeader, Tabs, Button, notification } from 'antd'\r\nimport LogEntry from './LogEntry'\r\nimport BookEntries from './BookEntries'\r\nimport BookChat from './BookChat'\r\nimport api from '../../services/api'\r\nimport moment from 'moment'\r\nimport { calculateStatus } from '../../services/CommonFunctions'\r\nimport BookMembers from './BookMembers'\r\nconst TabPane = Tabs.TabPane\r\n\r\nconst BookContainer = props => {\r\n  const id = props.match.params.id ? props.match.params.id : null\r\n  const [book, setBook] = useState({ members: [], entries: [] })\r\n  const [logEntry, setLogEntry] = useState(null)\r\n  const [tabIndex, setTabIndex] = useState('1')\r\n\r\n  useEffect(() => {\r\n    if (!id) {\r\n      return\r\n    }\r\n    api.get(`/api/logbooks/${id}`).then(res => {\r\n      res ? setBook(res) : props.history.push('/books')\r\n    })\r\n  }, [id])\r\n\r\n  const handleLogEntry = (entry, sumbited = false) => {\r\n    if (sumbited && entry) {\r\n      if (entry.id) {\r\n        var index = book.entries.findIndex(x => x.id === entry.id)\r\n        book.entries[index] = entry;\r\n      } else {\r\n        book.entries.push(entry)\r\n      }\r\n      setBook(book)\r\n      entry = null\r\n    }\r\n    setLogEntry(entry)\r\n  }\r\n  const deleteEntryHandler = (l) => {\r\n    api.delete(`/api/logbooks/${id}/entries/${l.id}`).then(res => {\r\n      var index = book.entries.findIndex(x => x.id === l.id)\r\n      book.entries.splice(index, 1)\r\n      setBook({ ...book })\r\n      notification['success']({\r\n        message: 'Επιτυχής διαγραφή',\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleTabIndex = key => {\r\n    setTabIndex(key)\r\n  }\r\n\r\n  const logEntryModal = logEntry ? (\r\n    <LogEntry data={logEntry} onClose={(entry, submited) => handleLogEntry(entry, submited)} />\r\n  ) : null\r\n\r\n  const lastupdate = moment(book.lastUpdate).fromNow()\r\n  return (\r\n    <Row className=\"is-fullheight\">\r\n      <Col sm={24}>\r\n        <PageHeader\r\n          onBack={() => window.history.back()}\r\n          title={book.name}\r\n          subTitle={lastupdate + ' ενημερώθηκε'}\r\n          tags={calculateStatus(book.close)}\r\n          extra={[\r\n            <Button\r\n              key=\"1\"\r\n              className=\"has-text-primary\"\r\n              size=\"small\"\r\n              onClick={() => handleLogEntry({ logBookId: id })}>\r\n              {' '}\r\n              Νεο Γεγονός{' '}\r\n            </Button>,\r\n            <Button\r\n              key=\"2\"\r\n              type=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => props.history.push('/book/' + book.id)}>\r\n              {' '}\r\n              Eπεξεργασία{' '}\r\n            </Button>\r\n          ]}\r\n          footer={\r\n            <Tabs defaultActiveKey={tabIndex} onChange={handleTabIndex}>\r\n              <TabPane tab=\"Γεγονότα\" key=\"1\" />\r\n              <TabPane tab=\"Μέλη\" key=\"2\" />\r\n            </Tabs>\r\n          }\r\n        />\r\n      </Col>\r\n      <Col sm={24} md={24} lg={18} xl={19}>\r\n        {tabIndex === '1' ? (\r\n          <BookEntries data={book.entries} edit={l => handleLogEntry(l)}\r\n            onDelete={(l) => deleteEntryHandler(l)} />) :\r\n          (<BookMembers members={book.members} />\r\n          )}\r\n      </Col>\r\n      <Col sm={24} md={24} lg={6} xl={5} className=\"chat-container\">\r\n        <BookChat />\r\n      </Col>\r\n      {logEntryModal}\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport default BookContainer\r\n","import React from 'react'\r\nimport { Route, Switch, Redirect } from 'react-router-dom'\r\nimport Login from './login/Login'\r\nimport Dashboard from './dashboard/Dashboard'\r\nimport MapContainer from './map/MapContainer'\r\nimport Books from './books/Books'\r\nimport Book from './books/Book'\r\nimport BookContainer from './books/BookContainer'\r\n\r\nexport const Authorizedroutes = () => (\r\n  <Switch>\r\n    <Route path=\"/dashboard\" exact component={Dashboard} />\r\n    <Route path=\"/map\" exact component={MapContainer} />\r\n    <Route path=\"/books\" exact component={Books} />\r\n    <Route path=\"/book/monitor/:id\" exact component={BookContainer} />\r\n    <Route path=\"/book/new\" exact component={Book} />\r\n    <Route path=\"/book/:id\" exact component={Book} />\r\n    <Redirect to=\"/dashboard\" />\r\n  </Switch>\r\n)\r\n\r\nexport const UnauthorizedRoutes = () => (\r\n  <Switch>\r\n    <Route path=\"/login\" exact component={Login} />\r\n    <Redirect to=\"/login\" />\r\n  </Switch>\r\n)\r\n","import React, { Suspense, useContext } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport LayoutContainer from './components/layout/Layout'\r\nimport { AuthContext } from './auth/AuthProvider'\r\nimport { Authorizedroutes, UnauthorizedRoutes } from './components/Routes'\r\nimport 'moment/locale/el'\r\nimport './styles/Utilities.sass'\r\n\r\nconst Routes = () => {\r\n  const authContext = useContext(AuthContext)\r\n  return authContext.isAuthenticated ? (\r\n    <Authorizedroutes />\r\n  ) : (\r\n    <UnauthorizedRoutes />\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  return (\r\n    <LayoutContainer className=\"is-fullheight\">\r\n      <Suspense fallback={<p>Loading...</p>}>\r\n        <Routes />\r\n      </Suspense>\r\n    </LayoutContainer>\r\n  )\r\n}\r\n\r\nexport default withRouter(App)\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport './styles/Index.sass'\r\nimport App from './App'\r\nimport * as serviceWorker from './serviceWorker'\r\nimport AuthProvider from './auth/AuthProvider'\r\n\r\nconst Root = (\r\n  <BrowserRouter>\r\n    <AuthProvider>\r\n      <App />\r\n    </AuthProvider>\r\n  </BrowserRouter>\r\n)\r\nReactDOM.render(Root, document.getElementById('root'))\r\n\r\nserviceWorker.unregister()\r\n"],"sourceRoot":""}